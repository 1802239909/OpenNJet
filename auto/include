
# Copyright (C) Igor Sysoev
# Copyright (C) Nginx, Inc.


echo $ngx_n "checking for $ngx_include ...$ngx_c"

cat << END >> $NJT_AUTOCONF_ERR

----------------------------------------
checking for $ngx_include

END


ngx_found=no

cat << END > $NJT_AUTOTEST.c

$NJT_INCLUDE_SYS_PARAM_H
#include <$ngx_include>

int main(void) {
    return 0;
}

END


ngx_test="$CC -o $NJT_AUTOTEST $NJT_AUTOTEST.c"

eval "$ngx_test >> $NJT_AUTOCONF_ERR 2>&1"

if [ -x $NJT_AUTOTEST ]; then

    ngx_found=yes

    echo " found"

    ngx_name=`echo $ngx_include \
              | tr abcdefghijklmnopqrstuvwxyz/. ABCDEFGHIJKLMNOPQRSTUVWXYZ__`


    have=NJT_HAVE_$ngx_name . auto/have_headers

    eval "NJT_INCLUDE_$ngx_name='#include <$ngx_include>'"

else
    echo " not found"

    echo "----------"    >> $NJT_AUTOCONF_ERR
    cat $NJT_AUTOTEST.c  >> $NJT_AUTOCONF_ERR
    echo "----------"    >> $NJT_AUTOCONF_ERR
    echo $ngx_test       >> $NJT_AUTOCONF_ERR
    echo "----------"    >> $NJT_AUTOCONF_ERR
fi

rm -rf $NJT_AUTOTEST*
