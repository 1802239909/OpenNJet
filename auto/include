
# Copyright (C) Igor Sysoev
# Copyright (C) Nginx, Inc.


echo $ngx_n "checking for $ngx_include ...$ngx_c"

cat << END >> $NJET_AUTOCONF_ERR

----------------------------------------
checking for $ngx_include

END


ngx_found=no

cat << END > $NJET_AUTOTEST.c

$NJET_INCLUDE_SYS_PARAM_H
#include <$ngx_include>

int main(void) {
    return 0;
}

END


ngx_test="$CC -o $NJET_AUTOTEST $NJET_AUTOTEST.c"

eval "$ngx_test >> $NJET_AUTOCONF_ERR 2>&1"

if [ -x $NJET_AUTOTEST ]; then

    ngx_found=yes

    echo " found"

    ngx_name=`echo $ngx_include \
              | tr abcdefghijklmnopqrstuvwxyz/. ABCDEFGHIJKLMNOPQRSTUVWXYZ__`


    have=NJET_HAVE_$ngx_name . auto/have_headers

    eval "NJET_INCLUDE_$ngx_name='#include <$ngx_include>'"

else
    echo " not found"

    echo "----------"    >> $NJET_AUTOCONF_ERR
    cat $NJET_AUTOTEST.c  >> $NJET_AUTOCONF_ERR
    echo "----------"    >> $NJET_AUTOCONF_ERR
    echo $ngx_test       >> $NJET_AUTOCONF_ERR
    echo "----------"    >> $NJET_AUTOCONF_ERR
fi

rm -rf $NJET_AUTOTEST*
